function Banner(){}Banner.prototype.LoadData=function(){var a=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code){var e=n.data;for(console.log(e),i=0;i<e.length;i++){var t=e[i];a.CreateBannerEvent(t)}}}})},Banner.prototype.CreateBannerEvent=function(n){var e=this,t=template("banner-item",{banner:n}),a=$(".banner-list-group"),i=null;n?(a.append(t),i=a.find(".banner-item:last")):(a.prepend(t),i=a.find(".banner-item:first")),e.ListernImgClickEvent(i),e.RemoveBannerEvent(i),e.addBannerBtnClickEvent(i)},Banner.prototype.ListenAddBtnClickEvent=function(){var e=this;$(".add-btn").click(function(){var n=$(".banner-list-group").children().length;console.log(n),console.log("................."),6<=n?window.messageBox.showInfo("最多只能添加6张轮播图！"):e.CreateBannerEvent()})},Banner.prototype.ListernImgClickEvent=function(n){var t=n.find(".thumbnail"),e=n.find(".image-input");t.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;t.attr("src",e)}}})})},Banner.prototype.addBannerBtnClickEvent=function(a){var i=a.find("span[class='priority']"),o=a.find("input[name='priority']"),r=a.find(".thumbnail"),c=a.find("input[name='link_to']"),n=a.find(".save-btn"),s=a.attr("data-banner-id"),l="";l=s?"/cms/editbanner/":"/cms/addbanner/",n.click(function(){var e=o.val(),n=c.val(),t=r.attr("src");xfzajax.post({url:l,data:{priority:e,image_url:t,link_to:n,pk:s},success:function(n){200===n.code?(s?window.messageBox.showSuccess("修改成功！"):(s=n.data.banner_id,a.attr("data-banner-id",s),window.messageBox.showSuccess("添加成功！")),i.text("优先级："+e)):console.log(n.message)},fail:function(n){console.log(n)}})})},Banner.prototype.RemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xtalert.alertConfirm({msg:"确认删除此轮播图？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("删除成功！"))}})}}):e.remove()})},Banner.prototype.run=function(){this.ListenAddBtnClickEvent(),this.LoadData()},$(function(){(new Banner).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lci5qcyJdLCJuYW1lcyI6WyJCYW5uZXIiLCJwcm90b3R5cGUiLCJMb2FkRGF0YSIsInNlbGYiLCJ0aGlzIiwieGZ6YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJiYW5uZXJzIiwiY29uc29sZSIsImxvZyIsImkiLCJsZW5ndGgiLCJiYW5uZXIiLCJDcmVhdGVCYW5uZXJFdmVudCIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdCIsIiQiLCJiYW5uZXJJdGVtIiwiYXBwZW5kIiwiZmluZCIsInByZXBlbmQiLCJMaXN0ZXJuSW1nQ2xpY2tFdmVudCIsIlJlbW92ZUJhbm5lckV2ZW50IiwiYWRkQmFubmVyQnRuQ2xpY2tFdmVudCIsIkxpc3RlbkFkZEJ0bkNsaWNrRXZlbnQiLCJjbGljayIsImNoaWxkcmVuIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybWRhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImltZ3VybCIsImF0dHIiLCJwcmlvcml0eVNwYW4iLCJwcmlvcml0eVRhZyIsImltYWdlVGFnIiwibGlua190b1RhZyIsInNhdmVCdG4iLCJiYW5uZXJJZCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsImltYWdlX3VybCIsInBrIiwic2hvd1N1Y2Nlc3MiLCJ0ZXh0IiwiZmFpbCIsImVyciIsInh0YWxlcnQiLCJhbGVydENvbmZpcm0iLCJtc2ciLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFVBR1RBLE9BQU9DLFVBQVVDLFNBQVcsV0FDeEIsSUFBSUMsRUFBT0MsS0FDWEMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLG9CQUNOQyxRQUFVLFNBQVVDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDckIsSUFBSUMsRUFBVUQsRUFBYSxLQUU1QixJQURBRSxRQUFRQyxJQUFJRixHQUNQRyxFQUFFLEVBQUVBLEVBQUVILEVBQVFJLE9BQU9ELElBQUksQ0FDMUIsSUFBSUUsRUFBU0wsRUFBUUcsR0FDckJWLEVBQUthLGtCQUFrQkQsU0FPM0NmLE9BQU9DLFVBQVVlLGtCQUFvQixTQUFTRCxHQUMxQyxJQUFJWixFQUFPQyxLQUNQYSxFQUFNQyxTQUFTLGNBQWMsQ0FBQ0gsT0FBU0EsSUFDdkNJLEVBQWFDLEVBQUUsc0JBQ2ZDLEVBQWEsS0FDZE4sR0FDQ0ksRUFBV0csT0FBT0wsR0FDbEJJLEVBQWFGLEVBQVdJLEtBQUssdUJBRTdCSixFQUFXSyxRQUFRUCxHQUNuQkksRUFBYUYsRUFBV0ksS0FBSyx1QkFFakNwQixFQUFLc0IscUJBQXFCSixHQUMxQmxCLEVBQUt1QixrQkFBa0JMLEdBQ3ZCbEIsRUFBS3dCLHVCQUF1Qk4sSUFHaENyQixPQUFPQyxVQUFVMkIsdUJBQXlCLFdBQ3RDLElBQUl6QixFQUFPQyxLQUNFZ0IsRUFBRSxZQUNSUyxNQUFNLFdBQ1QsSUFDSWYsRUFEa0JNLEVBQUUsc0JBQ0tVLFdBQVdoQixPQUN4Q0gsUUFBUUMsSUFBSUUsR0FDWkgsUUFBUUMsSUFBSSxxQkFDRSxHQUFWRSxFQUNBaUIsT0FBT0MsV0FBV0MsU0FBUyxnQkFHL0I5QixFQUFLYSx1QkFJYmhCLE9BQU9DLFVBQVV3QixxQkFBdUIsU0FBU0osR0FDN0MsSUFBSWEsRUFBUWIsRUFBV0UsS0FBSyxjQUN4QlksRUFBYWQsRUFBV0UsS0FBSyxnQkFDakNXLEVBQU1MLE1BQU0sV0FHUk0sRUFBV04sVUFFZk0sRUFBV0MsT0FBTyxXQUNkLElBQUlDLEVBQU9qQyxLQUFLa0MsTUFBTSxHQUNsQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU2pCLE9BQU8sT0FBT2UsR0FDdkJoQyxRQUFRb0MsS0FBSyxDQUNUbEMsSUFBTSxvQkFDTm1DLEtBQU9ILEVBQ1BJLGFBQWMsRUFDZEMsYUFBYyxFQUNkcEMsUUFBVSxTQUFVQyxHQUNoQixHQUF1QixNQUFuQkEsRUFBYSxLQUFVLENBQ3ZCLElBQUlvQyxFQUFTcEMsRUFBYSxLQUFPLElBQ2pDeUIsRUFBTVksS0FBSyxNQUFNRCxVQU9yQzdDLE9BQU9DLFVBQVUwQix1QkFBeUIsU0FBU04sR0FDL0MsSUFBSTBCLEVBQWUxQixFQUFXRSxLQUFLLDBCQUMvQnlCLEVBQWMzQixFQUFXRSxLQUFLLDBCQUM5QjBCLEVBQVc1QixFQUFXRSxLQUFLLGNBQzNCMkIsRUFBYTdCLEVBQVdFLEtBQUsseUJBQzdCNEIsRUFBVTlCLEVBQVdFLEtBQUssYUFDMUI2QixFQUFXL0IsRUFBV3lCLEtBQUssa0JBQzNCdkMsRUFBTSxHQUVOQSxFQURBNkMsRUFDTSxtQkFFQSxrQkFFVkQsRUFBUXRCLE1BQU0sV0FDVixJQUFJd0IsRUFBV0wsRUFBWU0sTUFDdkJDLEVBQVVMLEVBQVdJLE1BQ3JCRSxFQUFZUCxFQUFTSCxLQUFLLE9BQzlCekMsUUFBUW9DLEtBQUssQ0FDVGxDLElBQU9BLEVBQ1BtQyxLQUFRLENBQ0pXLFNBQVlBLEVBQ1pHLFVBQWFBLEVBQ2JELFFBQVdBLEVBQ1hFLEdBQUtMLEdBRVQ1QyxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDVjJDLEVBQ0NyQixPQUFPQyxXQUFXMEIsWUFBWSxVQUU5Qk4sRUFBVzNDLEVBQWEsS0FBYSxVQUNyQ1ksRUFBV3lCLEtBQUssaUJBQWlCTSxHQUNqQ3JCLE9BQU9DLFdBQVcwQixZQUFZLFVBRWxDWCxFQUFhWSxLQUFLLE9BQVFOLElBRTFCMUMsUUFBUUMsSUFBSUgsRUFBZ0IsVUFHcENtRCxLQUFPLFNBQVVDLEdBQ2JsRCxRQUFRQyxJQUFJaUQsU0FNNUI3RCxPQUFPQyxVQUFVeUIsa0JBQW9CLFNBQVNMLEdBQzNCQSxFQUFXRSxLQUFLLGNBQ3RCTSxNQUFNLFdBQ1gsSUFBSXVCLEVBQVcvQixFQUFXeUIsS0FBSyxrQkFDM0JNLEVBQ0FVLFFBQVFDLGFBQWEsQ0FDakJDLElBQU8sWUFDUEMsZ0JBQW1CLFdBQ2Y1RCxRQUFRb0MsS0FBSyxDQUNUbEMsSUFBTyxzQkFDUG1DLEtBQVEsQ0FDSndCLFVBQWFkLEdBRWpCNUMsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE9BQ2JZLEVBQVc4QyxTQUNYcEMsT0FBT0MsV0FBVzBCLFlBQVksZ0JBT2xEckMsRUFBVzhDLFlBS3ZCbkUsT0FBT0MsVUFBVW1FLElBQU0sV0FDbkJoRSxLQUFLd0IseUJBQ0x4QixLQUFLRixZQUVUa0IsRUFBRSxZQUNlLElBQUlwQixRQUNWb0UiLCJmaWxlIjoiYmFubmVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuXHJcbn1cclxuQmFubmVyLnByb3RvdHlwZS5Mb2FkRGF0YSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6Jy9jbXMvYmFubmVyX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICB2YXIgYmFubmVycyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFubmVycyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGk9MDtpPGJhbm5lcnMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5DcmVhdGVCYW5uZXJFdmVudChiYW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuQ3JlYXRlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXIpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdiYW5uZXItaXRlbScseydiYW5uZXInOmJhbm5lcn0pO1xyXG4gICAgdmFyIGJhbm5lckxpc3QgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcclxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcclxuICAgIGlmKGJhbm5lcil7XHJcbiAgICAgICAgYmFubmVyTGlzdC5hcHBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdC5maW5kKCcuYmFubmVyLWl0ZW06bGFzdCcpO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIGJhbm5lckxpc3QucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0LmZpbmQoJy5iYW5uZXItaXRlbTpmaXJzdCcpO1xyXG4gICAgfVxyXG4gICAgc2VsZi5MaXN0ZXJuSW1nQ2xpY2tFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuUmVtb3ZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZEJhbm5lckJ0bkNsaWNrRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLkxpc3RlbkFkZEJ0bkNsaWNrRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFkZEJ0biA9ICQoJy5hZGQtYnRuJyk7XHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGxlbmd0aCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJy4uLi4uLi4uLi4uLi4uLi4uJyk7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKCfmnIDlpJrlj6rog73mt7vliqA25byg6L2u5pKt5Zu+77yBJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5DcmVhdGVCYW5uZXJFdmVudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLkxpc3Rlcm5JbWdDbGlja0V2ZW50ID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB2YXIgdGhhdCA9ICQodGhpcyk7XHJcbiAgICAgICAgLy8gdmFyIGltYWdlSW5wdXQgPSB0aGF0LnNpYmxpbmdzKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6Zm9ybWRhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6ZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6ZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ3VybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLGltZ3VybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYWRkQmFubmVyQnRuQ2xpY2tFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZChcInNwYW5bY2xhc3M9J3ByaW9yaXR5J11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgbGlua190b1RhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKTtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRiYW5uZXIvJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkYmFubmVyLyc7XHJcbiAgICB9XHJcbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0eVRhZy52YWwoKTtcclxuICAgICAgICB2YXIgbGlua190byA9IGxpbmtfdG9UYWcudmFsKCk7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzogaW1hZ2VfdXJsLFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzpiYW5uZXJJZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5L+u5pS55oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5re75Yqg5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KCfkvJjlhYjnuqfvvJonKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0WydtZXNzYWdlJ10pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgICAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICAgICAgeHRhbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ21zZyc6ICfnoa7orqTliKDpmaTmraTova7mkq3lm77vvJ8nLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5Yig6Zmk5oiQ5Yqf77yBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuTGlzdGVuQWRkQnRuQ2xpY2tFdmVudCgpO1xyXG4gICAgdGhpcy5Mb2FkRGF0YSgpO1xyXG59O1xyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcbn0pOyJdfQ==
