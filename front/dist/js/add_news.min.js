function News(){}News.prototype.UeditorEvent=function(){var t=UE.getEditor("container",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"});window.ue=t},News.prototype.AddNewsEvent=function(){var t=$("#submit-Btn"),s=$("input[name='title']"),u=$("select[name='category']"),l=$("input[name='desc']"),c=$("input[name='thumbnail']"),p=t.attr("data-news-id");console.log(p),t.click(function(t){t.preventDefault();var e=s.val(),n=u.val(),o=l.val(),i=c.val(),a=ue.getContent(),r="";r=p?"/cms/edit_news/":"/cms/add_news/",e&&n&&o&&i&&a?xfzajax.post({url:r,data:{title:e,category:n,desc:o,thumbnail:i,content:a,pk:p},success:function(t){200===t.code&&(p?xtalert.alertSuccessToast("新闻编辑成功！"):xtalert.alertSuccessToast("新闻发布成功！"),window.location="/cms/news_lists/")},fail:function(t){xtalert.alertInfoToast(t)}}):window.messageBox.showError("请输入新闻完整信息！")})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("input[name='thumbnail']").val(e)}}})})},News.prototype.listenQiniuUploadEvent=function(){var r=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(t){if(200===t.code){var e=t.data.token,n=(new Date).getTime()+"."+a.name.split(".")[1],o={fname:n,params:{},mimeType:["image/png","image/jpeg","image/gif","video/mp4"]},i={userCdnDomain:!0,retryCount:6,region:qiniu.region.z1};qiniu.upload(a,n,e,o,i).subscribe({next:r.QiniuUploadNext,error:r.QiniuUploadError,complete:r.QiniuUploadComplete})}}})})},News.prototype.QiniuUploadNext=function(t){var e=t.total.percent,n=$("#progess-group"),o=$(".progress-bar");o.css({width:0}),n.show(),o.css({width:e+"%"}),o.text(e.toFixed()+"%")},News.prototype.QiniuUploadError=function(t){xtalert.alertErrorToast("上传文件类型错误，请选择图片文件！")},News.prototype.QiniuUploadComplete=function(t){var e=t.key,n=$("#progess-group");$("input[name='thumbnail']").val("http://pbci7ji9t.bkt.clouddn.com/"+e),n.hide()},News.prototype.run=function(){var t=this;t.listenQiniuUploadEvent(),t.UeditorEvent(),t.AddNewsEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZF9uZXdzLmpzIl0sIm5hbWVzIjpbIk5ld3MiLCJwcm90b3R5cGUiLCJVZWRpdG9yRXZlbnQiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwid2luZG93IiwiQWRkTmV3c0V2ZW50Iiwic3VibWl0QnRuIiwiJCIsInRpdGxlSW5wdXQiLCJjYXRlZ29yeVNlbGVjdCIsImRlc2NJbnB1dCIsInRodW1ibmFpbElucHV0IiwicGsiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRpdGxlIiwidmFsIiwiY2F0ZWdvcnkiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsImdldENvbnRlbnQiLCJ1cmwiLCJ4ZnphamF4IiwicG9zdCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwieHRhbGVydCIsImFsZXJ0U3VjY2Vzc1RvYXN0IiwibG9jYXRpb24iLCJmYWlsIiwiZXJyb3IiLCJhbGVydEluZm9Ub2FzdCIsIm1lc3NhZ2VCb3giLCJzaG93RXJyb3IiLCJsaXN0ZW5VcGxvYWRGaWxlRXZlbnQiLCJ1cGxvYWRCdG4iLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtZGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImltZ1VybCIsImxpc3RlblFpbml1VXBsb2FkRXZlbnQiLCJzZWxmIiwidGhpcyIsImdldCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VyQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejEiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiUWluaXVVcGxvYWROZXh0IiwiUWluaXVVcGxvYWRFcnJvciIsImNvbXBsZXRlIiwiUWluaXVVcGxvYWRDb21wbGV0ZSIsInJlcyIsInBlcmNlbnQiLCJ0b3RhbCIsInByb2dlc3NHcm91cCIsInByb2dlc3NiYXIiLCJjc3MiLCJ3aWR0aCIsInNob3ciLCJ0ZXh0IiwidG9GaXhlZCIsImVyciIsImFsZXJ0RXJyb3JUb2FzdCIsImZpbGVuYW1lIiwiaGlkZSIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFLVEEsS0FBS0MsVUFBVUMsYUFBZSxXQUMxQixJQUFJQyxFQUFLQyxHQUFHQyxVQUFVLFlBQVksQ0FDMUJDLG1CQUFzQixJQUN0QkMsVUFBYSxxQkFFckJDLE9BQU9MLEdBQUtBLEdBRWhCSCxLQUFLQyxVQUFVUSxhQUFlLFdBQzFCLElBQUlDLEVBQVlDLEVBQUUsZUFDZEMsRUFBYUQsRUFBRSx1QkFDZkUsRUFBaUJGLEVBQUUsMkJBQ25CRyxFQUFZSCxFQUFFLHNCQUNkSSxFQUFpQkosRUFBRSwyQkFDbkJLLEVBQUtOLEVBQVVPLEtBQUssZ0JBQ3hCQyxRQUFRQyxJQUFJSCxHQUNaTixFQUFVVSxNQUFNLFNBQVVDLEdBQ3RCQSxFQUFNQyxpQkFDTixJQUFJQyxFQUFRWCxFQUFXWSxNQUNuQkMsRUFBV1osRUFBZVcsTUFDMUJFLEVBQU9aLEVBQVVVLE1BQ2pCRyxFQUFZWixFQUFlUyxNQUMzQkksRUFBVXpCLEdBQUcwQixhQUNiQyxFQUFNLEdBRU5BLEVBRERkLEVBQ08sa0JBRUEsaUJBRU5PLEdBQVFFLEdBQVdDLEdBQU9DLEdBQVlDLEVBSTFDRyxRQUFRQyxLQUFLLENBQ1RGLElBQU1BLEVBQ05HLEtBQU8sQ0FDSFYsTUFBUUEsRUFDUkUsU0FBV0EsRUFDWEMsS0FBT0EsRUFDUEMsVUFBWUEsRUFDWkMsUUFBVUEsRUFDVlosR0FBS0EsR0FFVGtCLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNUbkIsRUFDQ29CLFFBQVFDLGtCQUFrQixXQUUxQkQsUUFBUUMsa0JBQWtCLFdBRTlCN0IsT0FBTzhCLFNBQVcscUJBRzFCQyxLQUFPLFNBQVVDLEdBQ2JKLFFBQVFLLGVBQWVELE1BeEIzQmhDLE9BQU9rQyxXQUFXQyxVQUFVLGlCQStCeEMzQyxLQUFLQyxVQUFVMkMsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlsQyxFQUFFLGtCQUNsQmtDLEVBQVVDLE9BQU8sV0FDYixJQUFJQyxFQUFPRixFQUFVLEdBQUdHLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUosR0FDeEJoQixRQUFRQyxLQUFLLENBQ1RGLElBQU0sb0JBQ05HLEtBQVFnQixFQUNSRyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZm5CLFFBQVcsU0FBVUMsR0FDakIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJbUIsRUFBU25CLEVBQWEsS0FBTyxJQUNsQnhCLEVBQUUsMkJBQ1JhLElBQUk4QixVQU9qQ3RELEtBQUtDLFVBQVVzRCx1QkFBeUIsV0FDcEMsSUFBSUMsRUFBT0MsS0FDUzlDLEVBQUUsa0JBQ1JtQyxPQUFPLFdBQ2IsSUFBSUMsRUFBT1UsS0FBS1QsTUFBTSxHQUN0QmpCLFFBQVEyQixJQUFJLENBQ1I1QixJQUFNLGdCQUNOSSxRQUFVLFNBQVVDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSXdCLEVBQVF4QixFQUFhLEtBQVMsTUFDOUJ5QixHQUFNLElBQUtDLE1BQVFDLFVBQVUsSUFBSWYsRUFBS2dCLEtBQUtDLE1BQU0sS0FBSyxHQUN0REMsRUFBVyxDQUNYQyxNQUFRTixFQUNSTyxPQUFTLEdBQ1RDLFNBQVcsQ0FBQyxZQUFZLGFBQWEsWUFBWSxjQUVqREMsRUFBUyxDQUNUQyxlQUFnQixFQUNoQkMsV0FBYSxFQUNiQyxPQUFTQyxNQUFNRCxPQUFPRSxJQUVURCxNQUFNRSxPQUFPNUIsRUFBS2EsRUFBSUQsRUFBTU0sRUFBU0ksR0FDM0NPLFVBQVUsQ0FDakJDLEtBQU9yQixFQUFLc0IsZ0JBQ1p0QyxNQUFRZ0IsRUFBS3VCLGlCQUNiQyxTQUFXeEIsRUFBS3lCLDZCQVE1Q2pGLEtBQUtDLFVBQVU2RSxnQkFBa0IsU0FBU0ksR0FDdEMsSUFDSUMsRUFEUUQsRUFBSUUsTUFDSUQsUUFDaEJFLEVBQWUxRSxFQUFFLGtCQUNqQjJFLEVBQWEzRSxFQUFFLGlCQUNuQjJFLEVBQVdDLElBQUksQ0FBQ0MsTUFBUSxJQUN4QkgsRUFBYUksT0FDYkgsRUFBV0MsSUFBSSxDQUFDQyxNQUFRTCxFQUFRLE1BQ2hDRyxFQUFXSSxLQUFLUCxFQUFRUSxVQUFVLE1BRXRDM0YsS0FBS0MsVUFBVThFLGlCQUFtQixTQUFTYSxHQUV2Q3hELFFBQVF5RCxnQkFESixzQkFJUjdGLEtBQUtDLFVBQVVnRixvQkFBc0IsU0FBU0MsR0FDMUMsSUFBSVksRUFBV1osRUFBUyxJQUVwQkcsRUFBZTFFLEVBQUUsa0JBQ0xBLEVBQUUsMkJBQ1JhLElBSEcsb0NBR1FzRSxHQUNyQlQsRUFBYVUsUUFHakIvRixLQUFLQyxVQUFVK0YsSUFBTSxXQUNqQixJQUFJeEMsRUFBT0MsS0FFWEQsRUFBS0QseUJBQ0xDLEVBQUt0RCxlQUNMc0QsRUFBSy9DLGdCQUdURSxFQUFFLFlBQ1ksSUFBSVgsTUFDVmdHIiwiZmlsZSI6ImFkZF9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbn1cclxuXHJcbi8v5a6e5L6L5YyW55m+5bqm5a+M5paH5pys57yW6L6R5ZmoXHJcbk5ld3MucHJvdG90eXBlLlVlZGl0b3JFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdWUgPSBVRS5nZXRFZGl0b3IoJ2NvbnRhaW5lcicse1xyXG4gICAgICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXHJcbiAgICAgICAgfSk7XHJcbiAgICB3aW5kb3cudWUgPSB1ZVxyXG59O1xyXG5OZXdzLnByb3RvdHlwZS5BZGROZXdzRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtQnRuJyk7XHJcbiAgICB2YXIgdGl0bGVJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpO1xyXG4gICAgdmFyIGNhdGVnb3J5U2VsZWN0ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpO1xyXG4gICAgdmFyIGRlc2NJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIik7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbiAgICB2YXIgcGsgPSBzdWJtaXRCdG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XHJcbiAgICBjb25zb2xlLmxvZyhwayk7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGl0bGUgPSB0aXRsZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IGNhdGVnb3J5U2VsZWN0LnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gZGVzY0lucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSB0aHVtYm5haWxJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IHVlLmdldENvbnRlbnQoKTtcclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgaWYocGspe1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL2FkZF9uZXdzLyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF0aXRsZXx8IWNhdGVnb3J5fHwhZGVzY3x8IXRodW1ibmFpbHx8IWNvbnRlbnQpe1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoJ+ivt+i+k+WFpeaWsOmXu+WujOaVtOS/oeaBr++8gScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOnVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6dGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOmRlc2MsXHJcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzp0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6Y29udGVudCxcclxuICAgICAgICAgICAgICAgICdwayc6cGtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeHRhbGVydC5hbGVydFN1Y2Nlc3NUb2FzdCgn5paw6Ze757yW6L6R5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4dGFsZXJ0LmFsZXJ0U3VjY2Vzc1RvYXN0KCfmlrDpl7vlj5HluIPmiJDlip/vvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9jbXMvbmV3c19saXN0cy8nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB4dGFsZXJ0LmFsZXJ0SW5mb1RvYXN0KGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyDkuIrkvKDliLDmnKzlnLDmnI3liqHlmajorr7nva5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xyXG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtZGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWdVcmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybElucHV0ID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVybElucHV0LnZhbChpbWdVcmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcbi8vIOS4iuS8oOWIsOS4g+eJm+S6kVxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5RaW5pdVVwbG9hZEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgICAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICAgICAndXJsJzonL2Ntcy9xbnRva2VuLycsXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkrJy4nK2ZpbGUubmFtZS5zcGxpdCgnLicpWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm5hbWUnOmtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXJhbXMnOnt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbWVUeXBlJzpbJ2ltYWdlL3BuZycsJ2ltYWdlL2pwZWcnLCdpbWFnZS9naWYnLCd2aWRlby9tcDQnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJDZG5Eb21haW4nOnRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmV0cnlDb3VudCc6NixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZWdpb24nOnFpbml1LnJlZ2lvbi56MSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSxrZXksdG9rZW4scHV0RXh0cmEsY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQnOnNlbGYuUWluaXVVcGxvYWROZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzpzZWxmLlFpbml1VXBsb2FkRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOnNlbGYuUWluaXVVcGxvYWRDb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG59O1xyXG4vLyDmlofku7bkuIrkvKBuZXh077yM5Lya5pyJ5LiK5Lyg55qE6L+b5bqm5L+h5oGvXHJcbk5ld3MucHJvdG90eXBlLlFpbml1VXBsb2FkTmV4dCA9IGZ1bmN0aW9uKHJlcyl7XHJcbiAgICB2YXIgdG90YWwgPSByZXMudG90YWw7XHJcbiAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7XHJcbiAgICB2YXIgcHJvZ2Vzc0dyb3VwID0gJCgnI3Byb2dlc3MtZ3JvdXAnKTtcclxuICAgIHZhciBwcm9nZXNzYmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgcHJvZ2Vzc2Jhci5jc3Moeyd3aWR0aCc6MH0pO1xyXG4gICAgcHJvZ2Vzc0dyb3VwLnNob3coKTtcclxuICAgIHByb2dlc3NiYXIuY3NzKHsnd2lkdGgnOnBlcmNlbnQrJyUnfSk7XHJcbiAgICBwcm9nZXNzYmFyLnRleHQocGVyY2VudC50b0ZpeGVkKCkrJyUnKTtcclxufTtcclxuTmV3cy5wcm90b3R5cGUuUWluaXVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uKGVycil7XHJcbiAgICBlcnI9J+S4iuS8oOaWh+S7tuexu+Wei+mUmeivr++8jOivt+mAieaLqeWbvueJh+aWh+S7tu+8gSc7XHJcbiAgICB4dGFsZXJ0LmFsZXJ0RXJyb3JUb2FzdChlcnIpO1xyXG4gICAgLy8gd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycik7XHJcbn07XHJcbk5ld3MucHJvdG90eXBlLlFpbml1VXBsb2FkQ29tcGxldGUgPSBmdW5jdGlvbihyZXMpe1xyXG4gICAgdmFyIGZpbGVuYW1lID0gcmVzWydrZXknXTtcclxuICAgIHZhciBkb21haW4gPSAnaHR0cDovL3BiY2k3amk5dC5ia3QuY2xvdWRkbi5jb20vJztcclxuICAgIHZhciBwcm9nZXNzR3JvdXAgPSAkKCcjcHJvZ2Vzcy1ncm91cCcpO1xyXG4gICAgdmFyIGZpbGVJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKTtcclxuICAgIGZpbGVJbnB1dC52YWwoZG9tYWluK2ZpbGVuYW1lKTtcclxuICAgIHByb2dlc3NHcm91cC5oaWRlKCk7XHJcblxyXG59O1xyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyBzZWxmLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5RaW5pdVVwbG9hZEV2ZW50KCk7XHJcbiAgICBzZWxmLlVlZGl0b3JFdmVudCgpO1xyXG4gICAgc2VsZi5BZGROZXdzRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgIG5ld3MucnVuKCk7XHJcbn0pOyJdfQ==
